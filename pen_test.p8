pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- my own image format
-- by afunai

str = [[
045679=?„Å¨„ÅÆ„ÅØ„Å≤„Åµ„Å∏„Åª„Åø
08121;1=1?21292:2;2<343743475?6=73747>80898;8<92989:9;9<:2:9:<;1;2;8;9;<<2<8<9<:<;=1=6>7?1?5
---
0481;K1nC1=113=1C1=5C112A111A2218>
0381;>11;:1q=216C2=3C211C3218>
S281U1;:11;113;91rC1=31<C112918>
@281;:16;411;21tA121=21<=111218?
82;;16;114;11tC123C2=11;C1218?
;<1‚ñí=123=3C119=1C1<18?
;;1üê±=122=7C2=1C113C2;18?
;;1‚ñíC1=221=433=4C115;18>
;:1‚¨áÔ∏è==31=3C113;18=
;919C1=1C11WC11LC113=732=8C112D111;18<
;919C1=21TC211C1=11J=213C1=133=232=631=111?112?111;18;
;81;=1C11T=51I=315C1=332=231=231=311?112?1D111<18:
;81`C1=5C11P;1==11?312D1129189
;71aC1=61S;112=312C112?513D11189
;61D;71GC1=1C1=31<D11C?215;413?711D1?21188
;51?A1;122<488<1;11CC1=418?2D3?21A?3=23161=211D1?113=411D113?21187
;211;21<;111=121C1=7A1;1<187<1;11A=21:?71?D112?1=13165=466=214?111;186
1>A12211=6k1=1k1=1k1>1=1C1;3<191<183<1;11@=119D1?2D1?413=418?113=162:367:264=114?111;185
1<A121A1=1C1=3R1=3>1R1>171=2>1R1=1C111=1A1;1<283;11>=319?8=235=215?211=13161:261:162:162:5216317;184
1:C1=2C11121;1=8k1>172k1>1=1>1k1=132=111;1<282;11;=331=219=633=434=2?1D111?11131693462:362=117;18291
18C1=521U1A1=7?1=1R1>1R1>1R1>1R1>1R1>1R2=121;2<3;119=13L=432=114316331L2P1>1R171M142M163:16231189181<1
17C111A2=411=612=2?112k1>1k1>1k1>1?1=1k131=121;1=12191<117=232=43J=23321819164314271k5>1k1>162216231=111?1169181
16A2;1<1U1A1=1R1>1=811=1R1>1=2R1>1R1>1R1=3>1R1>1=222<2;115=132=33N=332=121<163=13171>1k1>1k1>1k1>1k1>1=166=311D213<1
14;581<1;1i1=1R1>1=613R1>1R1>2R1>1R1=111=1R1>1R1>1=421<1U114=132=23S=232=1213162=1M1>1k1>1k1>4k1>1=168=111D114
13;4<1;1A1=6>1k1>1k1>1k1=3k1>172=2k1=5k1>1k1=231=221<1U18191=132=238>1=1>1=1>1k3>1k1>1k33?=23363=1K1R1>1R1>6R1M13167=1?115
12;181<4i1=9R1>1R1>1R1>1R173=114=2R1>1R1>1=6228191=13;K1>1=1?1D2=1k1>1=1?4k1>1=23?=23362=1k1>3k3743164:16131=1?115
;281<3;1A1=2>1=1>1=7k1>1k1>131=216=1k1>1k1>1=721<181=13;k1>1=2?3=2?1=3?3>1=33?=23361=2>1R331=66631=1?214
8291;312=8>1k1>1k1>1k1>2=212=1k1>1k1>1k1=1k1>1=5i1=2;1<1213;>1k1=111=1?4D2=1k1>1=1D1?3D1=13A=132=121=56<31=1?512
82<1;211=812=3>1k1>1k1=212=1>2=5>1=8233;P1>1=111l1?511l1?2=1k1?3=1113F=26?31i1?711
82;2i1=511=413=2>1=1>111=2>1=2?2=3>1R1>1R1=621<1=13;>1=2?2=1R1=1?5=4>1R1>1?1R171P13E642664312111l1?611
;411A1=6>1=215=311=1R1>2=1>1=1>1=111=3R1=1R1=1i1=121<23<=3?2=3?5=3?1=1R1=1?1=1>1R171P13B<18<21619181;111l1?6
;3A112=71;=9R1>1=111=1R131=3<2213<=1R1>1?7l1?1k1=2?3=112l2?2=1713A=18>0281;111?6
;2<1A1=3R1=912=217=5R1=531=221<181213:K1=1k1=1k1>1?4=1?812=111?111?3R1K13>=132<18:91810481;111?5
23=1;121=431=612=417=;2282=138K1>1R2=2>1R1=1?812=511?1D1?4=2713?218;068112?4
22=:32=313=419=721<181S181=139>1R1>1=3>1=1?1=1?3=1?1D112?1=5?5k1?2=1>13<=131=18;S281S183;311;111
;221=131=634=1i114=>>1=321<18101S181=138>1k1>1k112=1>1=1?2D3=112D1=1?2=4?4k1>1k1>1k1>1k1P13:=1328303S288;7U1
22=612=134=1C112=611=612=322<181S10281=138k1>1k1=212=1k1?211D311D1?1=2?1=1?1=1R1?2D1=1R1?1=1>1R431K13;<181S103S10184;<
=3C1;121=633=3C112C1=311=213=112=22281S1052138>1k2>1k1=112=2?111D3?112=2D112=1?3=1k1=4k1>1k43;2181S20382;?
;2<2;121=1C1=534=1C1;112=8>1=221=1219182S105<138=1k4=2;2?3D1?3=211=1?1D112?1=3?111=3?1=4>1P13:2181S102S182;@
82<281;122=733=:>1R1=221=12184068138=2k414?1l1?3=1?1=113?3l1?111?219=1P13:2181S101S182;9a781
;28291<1822111C1=6R1>1R2=411=421<28408S12137=1k1=2>1=3k113?216?2=411?1=215;111=13<<184a1;7a388
12;184<2C1=212=;;121=121<185S109S18137=1R2=312=111;119l1?1=2>1=1?3k1=114;111=23;85;6a28;
14;182<18222;12212C1=1C1E1;1<321<1820282S10:S1822135K1>1k1=1k2=112=111;215=2?111?2=1>1=1?5=1>1=111;1E111=13:=184;6a28<
14a18:<18192<185S10CS182=134>1k713;181;113l1?4l1?1=1>1R1?4l1=1k2=4K13:2184;5a388a282
1484S281S187S10I81S1812135R3=412;1a2;211?3=1?4R1>1R1?5=1k271k1=13<<183a1;5a489a181
14830Y812133=1E1=2C1;183a2;411?6R1=1R3=1?3=2R271R33:=184;6a28=
14830Z81=133=121;2<19184;111=112?2l1?1>1=1>1R5?2=4k53:<18391;Da1
1482S10[81=134=121;4a182;111=1?5R1>1R5>1R1?2=3>1k47138218491;6B115C115;1B1;1
14820@S10KS181=136=411;1=1k1>1k1>1?4k1>1k4>1=1?1l1=2>1k57137218591;413C1=1C1=6C212B1
14;2810681912<<1810ES2812139=2k1>1k2>1=1?3=1k1=2>1k1=1?2l1?1=1k1>1k1>1k336218691;2B111C2=<C111=1
14;281038121=B2101S20?S201S181<138=5>1=1>1k1=1?1=712?1=3k3>1=136218791B113=@K1
14;2822131=E31=1<185S106S105S282=137=121E1=316=512=835=1<18891C1k1=?R1>1=1R1
15C1=131=I31=12184S104S501S581<1=136=121;3a1;4a1819111=215C1=334=1218;E1>1R3=;>1R2>1R1
12C1=P31=184S484S101S203S281<1=134=131=923E1C1=73421918:S182<1>1k3>1k1=:>1k2>1
=231=Q32=18:0:S18221=13GK131=1218=018291=1k6>1=9>1k2
=V31=189S10<8291=132=425=335=221<181S10389S1028221=1k5>1k1>1k1>1k1=1k1>1=3k1
==31=139=534=631=1890<S181=42==231=18306S28703S181<1C1=1k1>1k3>1k1>1k4>1k1>1=2
=:39K535K2J134=431=191880:81<1=32B=282098505S181A1=2R1>1R3>1R1>1R1>1R1>1R1>1=2
=738K@31K135=331=189088121=22E=221810883S10781<1=4R1=1R1>1R1>1R3>1R1>1R1=1
=43:KF33=3312189068121=22H=2810683S1088191=1k1=7k1>1k1>1k1>1k1=2
=33;KAM1K236=331918904S121=22J=2810482S209S181<1>1=512=3>1k1>1k1=2
3:K231KAJ1M1K137=331=18:0321=22L=28102S1830;8211>1R1=>
37K231K=31K1M2K3M2K336=331<18;91=22N=20184S10;S181<1=1>1=>
36KA31K3M1K835=331218;21=12P=121840<S18221=1R1==
34P?31P6M2P3J1P634=48:<1=22Q3121830=S18221>1R1=<
33PM31L2P335=231<18921=12=6226622;=282S10>S182=1R1=<
72K132KJ31L131L2K433=231=189=2266122=3226121=322632;=12181S10?82<1=1k1=;
K333KAk1KA33=131=188<1=2256222=522=521=16329=2810@S182<1=<
33KE>1K?34=231918721=2236422=522=621=16329=1<10@S282<1=;
32KE>1k1>179K633=1322187=2246422=522=862=16128=20AS183<1=9k1
33KE>1k173K<34=131218691=2236521<1=411<121=3>1=66327=131810@85<1C1=1>1=4k1>1
33P331PH>1P1M1P734=1312186<1=22361=163<221=4<221=2>3=321=16227=131910A85<1=1R1>1=111?1=1R1
34P232PD31P>34=186<1=22261=1?1=321<18121=321<2=921=1612831210?82S185<1=1>1k1=2>1k1
34PUJ1P134=186<1=6?352;181<1=4<18121=9216128=1210@81S1869121=1k1R1>2
7232P132PKJ5P2J1P134=18591<1=5C1?3521181<121=3218121=92:=1210=8201S18921=1R1>2
37P<>1k276P8J3P434=183<193=5C1?151?251?1;181;1=4<221=5>1=221<128=1210>8201S189<1=1k1=1
k235PT34=18491<2=61151?25211;1<111=321<1;1=5>1R1=121<128=1210?S2018;21C1
R235PT3421859221=5l1?1N1?252;1<1;1=421<121=62:=131210@S1028;91
P233P132P9M1PI34218491<3=5?65111;211=321<221=5<121<127=13121810@S102S18:
P337PQ34=18392<281=5?3N1?411;2=42181<125<228=131<1810AS201S183S185
P338PQ33218293<281<1=4?7N1?1;1<121=31184<121<4216125=2820BS18101S683
P437P=>1P@32P133<18391<382=4?911;211=32182<181<321<1216124=221830B@181@101@301@281
P537P;>1PC34<18491<1918221=4?6m2?111;1<12485<2226323=28404@683@10:@182@2
P534k171P3>1P<31P331P832=232=1869281@181=4?8m1?1;1<586226323=8<18<@10;@182
P534>1k172>1k174P<31P732=332218491<121<181@2<1=4?4N2?311;181<281<182;1<181<1216224=137=1850E@1
P631>331>2P1>1P7>1k171P@=2332182<681@28121=4?5m1?212;2<3;112;1<1226223=131=26122=321810I
P831P2>1=1P9>1P?31P234=191@184<191<181@28221=4?:14?151?1=16423=131=1<1d1<422=121820<@209
P<>1P8>1P431P331P731P231=1322182<121=33221952131=3??=16423=321<191<291<123=2<1810<@406
P:31P7>1PD32=23223=136=18621=4?==26323=131=12:=321<1810<@306
K331K231KH31K7=332=1<321=784@18221=131=3?911=523=322=226=521<102@109@101@181@5
3;P?31P<=23321829121=12688<1=132=311?2l111C1=931=2<121=623=791@208@30282@3
3;P@31P;=232=1<183<1=123<121=1219185@28121=232=@21<221=623=72182@108@20382@2
3:PM34=19183<1=121=22582@182@28321=235=234=321<4=233=224=621<191810>@182
3:PM=132=1<18423=7218;91<121=822<423=233=226=225<1810?81
3:K131K131KI=132218392=;2183S101S3889384<122<121=821=124=62481S102S389
37>1k27133KI32=1218194=<<18202S28@<421=<22=833=1<188S104
]]

function _draw()
 cls()

 data=split(str,'\n',false)
 headers={}
 while data[1]!='---' do
  add(headers,data[1])
  deli(data,1)
 end
 deli(data,1)

 dpal=headers[1]
 for p=1,#dpal do
  pal(p-1,ord(dpal,p)-0x30,1);
 end

 vcolor={}
 vpal=headers[2]
 for i=1,#vpal,2 do
  local c1,c2=ord(vpal,i,2)
  add(
   vcolor,
   (c1-0x30)*16 + (c2-0x30))
 end

 for y,line in pairs(data) do
  local x=0
  for i=1,#line,2 do
   local p,len=ord(line,i,2)
   p-=0x30
   len-=0x30
   if (p < 16) then
    rectfill(x,y,x+len,y,p)
   else
    fillp(0b1010010110100101)
    rectfill(
     x,y,x+len,y,vcolor[p-15])
    fillp(0)
   end
   x+=len
  end
 end
end
